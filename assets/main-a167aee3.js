const p={executeAction:"[Espace] {action}",shoot:"Tirer",see:"Consulter",examine:"Examiner",seeTheRules:"Voir les règles"},g={jobChanged:"Vous êtes maintenant {job}",jobs:{archaeologist:"Archéologue",spy:"Espion"},myJobWallet:{label:"Portefeuille"}},m=Object.freeze(Object.defineProperty({__proto__:null,job:g},Symbol.toStringTag,{value:"Module"})),h={title:"Carte d'{job}",name:"Nom",jobs:{archaeologist:{name:"Archéologue",attributes:"Nom : {name}<br> Niveau: Avancé",description:"Félicitations, vous êtes désormais membre des archéologues en herbe. Nous certifions par la délivrance de la présente carte que vous pouvez :",permissions:{speakAncienLanguages:"Parler les anciens langages",readRunes:"Lire les runes",makeExcavation:"Faire des fouilles"}},spy:{name:"Espion",attributes:"Nom : {name}<br> Matricule: 007",description:"Agent spécial d'état. Spacialisé dans :",permissions:{useComputers:"le piratage informatique",findSecretPassages:"trouver et emprunter les passages secrets"}}}},j=Object.freeze(Object.defineProperty({__proto__:null,jobWallet:h},Symbol.toStringTag,{value:"Module"})),y=Object.freeze(Object.defineProperty({__proto__:null,utils:p,modules:m,views:j},Symbol.toStringTag,{value:"Module"})),f={executeAction:"[Space] {action}",shoot:"Shoot",see:"See",examine:"Examiner",seeTheRules:"See the rules"},S={jobChanged:"You are now a(n) {job}",jobs:{archaeologist:"Archaeologist",spy:"Spy"},myJobWallet:{label:"Wallet"}},A=Object.freeze(Object.defineProperty({__proto__:null,job:S},Symbol.toStringTag,{value:"Module"})),W={title:"{job} card",name:"Name",jobs:{archaeologist:{name:"Archaeologist",attributes:"Name : {name}<br> Level: Advanced",description:"Congratulations, you are now a member of the Budding Archaeologists. We certify by the issuance of this card that you can :",permissions:{speakAncienLanguages:"Speak the old languages",readRunes:"Read the runes",makeExcavation:"Make excavation"}},spy:{name:"Spy",attributes:"Name : {name}<br> Registration number: 007",description:"Special state agent. Specialized in :",permissions:{useComputers:"computer hacking",findSecretPassages:"find and use the secret passages"}}}},v=Object.freeze(Object.defineProperty({__proto__:null,jobWallet:W},Symbol.toStringTag,{value:"Module"})),_=Object.freeze(Object.defineProperty({__proto__:null,utils:f,modules:A,views:v},Symbol.toStringTag,{value:"Module"})),b={"fr-FR":y,"en-US":_};let l="fr-FR";WA.onInit().then(()=>{l=WA.player.language,Object.keys(b).includes(l)||(l="en-US")});const O=(e,s={})=>{let n=e;const o=Object.keys(s);for(let t=0;t<o.length;t++)n=n.replaceAll("{"+o[t]+"}",s[o[t]]);return n},i=(e,s={})=>{const o=e.split(".").reduce((t,r)=>(!t||!t[r]?t=void 0:t=t[r],t),b[l]);return o&&typeof o=="string"?O(o,s):e},d="jobWalletButton";let a=null;const w=e=>{WA.player.state.job=e},x=async()=>{a=await WA.ui.website.open({url:"http://localhost:5173/views/jobWallet/jobWallet.html?name=test",allowApi:!0,allowPolicy:"",position:{vertical:"middle",horizontal:"middle"},size:{height:"50vh",width:"50vw"}})},P=()=>{a==null||a.close(),a=null},c=()=>{WA.ui.actionBar.addButton({id:d,label:i("modules.job.myJobWallet.label"),callback:async()=>{a?P():await x()}})},u=()=>{WA.ui.actionBar.removeButton(d)},k=()=>{WA.player.state.job?c():u(),WA.player.state.onVariableChange("job").subscribe(e=>{e?(console.log(i("modules.job.jobChanged",{job:i(`modules.job.jobs.${e}`)})),c()):u()})};WA.onInit().then(()=>{console.log("INITIALISATION"),k(),w("archaeologist")}).catch(e=>console.error(e));
