import{t as s}from"./translate-ea8f1c55.js";import{r as i}from"./config-b9844f25.js";const a={archaeologist:{useComputers:!1,speakAncienLanguages:!0,readRunes:!0,makeExcavation:!0,findSecretPassages:!1},spy:{useComputers:!0,speakAncienLanguages:!1,readRunes:!1,makeExcavation:!1,findSecretPassages:!0}},r="jobWalletButton";let t=null;const W=e=>{WA.player.state.job=e},p=()=>WA.player.state.job,b=async()=>{WA.controls.disablePlayerControls(),t=await WA.ui.website.open({url:`${i}/views/jobWallet/jobWallet.html`,allowApi:!0,allowPolicy:"",position:{vertical:"middle",horizontal:"middle"},size:{height:"50vh",width:"50vw"}}),WA.player.state.askForJobWalletWebsiteClose=!1},y=()=>{WA.player.state.askForJobWalletWebsiteClose=!0},n=()=>{t==null||t.close(),t=null,WA.controls.restorePlayerControls()},o=()=>{WA.ui.actionBar.addButton({id:r,label:s("modules.job.myJobWallet.label"),callback:async()=>{t?n():await b()}})},l=()=>{WA.ui.actionBar.removeButton(r)},A=()=>{WA.player.state.job?o():l(),WA.player.state.onVariableChange("job").subscribe(e=>{e?(console.log(s("modules.job.jobChanged",{job:s(`modules.job.jobs.${e}`)})),o()):l()}),WA.player.state.onVariableChange("askForJobWalletWebsiteClose").subscribe(e=>{e&&n()})},j=e=>WA.player.state.job&&a[WA.player.state.job][e],m=()=>WA.player.state.job&&a[WA.player.state.job]?Object.keys(a[WA.player.state.job]).filter(e=>a[WA.player.state.job][e]):null;export{m as a,y as b,j as c,p as g,A as i,W as s};
